apps/ai/api.py
    F 215:0 update_prompt - C (11)
    F 431:0 scale_recipe_endpoint - B (7)
    F 339:0 create_remix_endpoint - A (5)
    F 521:0 tips_endpoint - A (5)
    F 122:0 get_ai_status - A (4)
    F 310:0 remix_suggestions - A (4)
    F 664:0 repair_selector_endpoint - A (4)
    F 259:0 list_models - A (3)
    F 570:0 timer_name_endpoint - A (3)
    F 705:0 sources_needing_attention_endpoint - A (3)
    F 163:0 test_api_key - A (2)
    F 202:0 get_prompt - A (2)
    F 614:0 discover_endpoint - A (2)
    F 30:0 handle_ai_errors - A (1)
    F 179:0 save_api_key - A (1)
    F 195:0 list_prompts - A (1)
    C 63:0 AIStatusOut - A (1)
    C 72:0 TestApiKeyIn - A (1)
    C 76:0 TestApiKeyOut - A (1)
    C 81:0 SaveApiKeyIn - A (1)
    C 85:0 SaveApiKeyOut - A (1)
    C 90:0 PromptOut - A (1)
    C 100:0 PromptUpdateIn - A (1)
    C 107:0 ModelOut - A (1)
    C 112:0 ErrorOut - A (1)
    C 275:0 RemixSuggestionsIn - A (1)
    C 279:0 RemixSuggestionsOut - A (1)
    C 283:0 CreateRemixIn - A (1)
    C 289:0 RemixOut - A (1)
    C 401:0 ScaleIn - A (1)
    C 408:0 NutritionOut - A (1)
    C 413:0 ScaleOut - A (1)
    C 506:0 TipsIn - A (1)
    C 511:0 TipsOut - A (1)
    C 556:0 TimerNameIn - A (1)
    C 561:0 TimerNameOut - A (1)
    C 597:0 DiscoverSuggestionOut - A (1)
    C 604:0 DiscoverOut - A (1)
    C 635:0 SelectorRepairIn - A (1)
    C 643:0 SelectorRepairOut - A (1)
    C 651:0 SourceNeedingAttentionOut - A (1)
apps/ai/fixtures.py
    F 301:0 get_fixture - A (2)
apps/ai/tests.py
    M 973:4 SelectorRepairAPITests.test_sources_needing_attention_endpoint - B (9)
    M 153:4 AIAPITests.test_ai_status_endpoint - B (8)
    M 712:4 SelectorRepairServiceTests.test_repair_selector_success - B (8)
    M 166:4 AIAPITests.test_ai_status_no_api_key - B (7)
    M 201:4 AIAPITests.test_ai_status_valid_api_key - B (7)
    M 352:4 OpenRouterServiceTests.test_validate_key_cached_caches_result - B (7)
    M 1381:4 AICacheTests.test_cache_decorator_caches_result - B (7)
    M 1578:4 RemixServiceTests.test_parse_time_remix - B (7)
    M 1589:4 RemixServiceTests.test_parse_servings - B (7)
    M 183:4 AIAPITests.test_ai_status_invalid_api_key - B (6)
    M 370:4 OpenRouterServiceTests.test_validate_key_cached_caches_invalid_result - B (6)
    M 742:4 SelectorRepairServiceTests.test_repair_selector_low_confidence_no_update - B (6)
    M 814:4 SelectorRepairServiceTests.test_get_sources_needing_attention - B (6)
    M 868:4 SelectorRepairAPITests.test_repair_selector_endpoint_success - B (6)
    C 150:0 AIAPITests - A (5)
    C 694:0 SelectorRepairServiceTests - A (5)
    M 767:4 SelectorRepairServiceTests.test_repair_selector_auto_update_disabled - A (5)
    C 851:0 SelectorRepairAPITests - A (5)
    M 943:4 SelectorRepairAPITests.test_repair_selector_endpoint_with_options - A (5)
    M 1039:4 AIFeatureFallbackTests.test_ai_status_shows_available_with_key - A (5)
    M 1055:4 AIFeatureFallbackTests.test_tips_returns_503_with_action_field_when_ai_unavailable - A (5)
    C 1372:0 AICacheTests - A (5)
    C 1569:0 RemixServiceTests - A (5)
    C 1644:0 DiscoverServiceTests - A (5)
    M 1683:4 DiscoverServiceTests.test_format_suggestions_from_list - A (5)
    M 1805:4 RankingServiceTests.test_apply_ranking_adds_missing - A (5)
    M 227:4 AIAPITests.test_models_endpoint_with_api_key - A (4)
    M 249:4 AIAPITests.test_get_prompt_endpoint - A (4)
    M 262:4 AIAPITests.test_update_prompt_endpoint - A (4)
    M 276:4 AIAPITests.test_update_prompt_invalid_model - A (4)
    C 316:0 OpenRouterServiceTests - A (4)
    M 525:4 OpenRouterServiceTests.test_get_available_models_success - A (4)
    C 638:0 TimerNamingAPITests - A (4)
    C 1005:0 AIFeatureFallbackTests - A (4)
    M 1025:4 AIFeatureFallbackTests.test_ai_status_shows_unavailable_without_key - A (4)
    M 1359:4 ValidatorEdgeCaseTests.test_get_schema_returns_schema - A (4)
    M 1408:4 AICacheTests.test_cache_key_generation - A (4)
    C 1446:0 ScalingServiceTests - A (4)
    M 1449:4 ScalingServiceTests.test_parse_time_minutes - A (4)
    M 1529:4 ScalingServiceTests.test_calculate_nutrition_string_values - A (4)
    M 1647:4 DiscoverServiceTests.test_get_season_winter - A (4)
    M 1656:4 DiscoverServiceTests.test_get_season_spring - A (4)
    M 1665:4 DiscoverServiceTests.test_get_season_summer - A (4)
    M 1674:4 DiscoverServiceTests.test_get_season_autumn - A (4)
    C 1705:0 RankingServiceTests - A (4)
    M 1726:4 RankingServiceTests.test_filter_valid_removes_titleless - A (4)
    M 1765:4 RankingServiceTests.test_apply_ranking - A (4)
    M 1779:4 RankingServiceTests.test_apply_ranking_handles_invalid_indices - A (4)
    M 1792:4 RankingServiceTests.test_apply_ranking_handles_duplicates - A (4)
    C 17:0 AIPromptModelTests - A (3)
    M 24:4 AIPromptModelTests.test_all_prompt_types_exist - A (3)
    M 52:4 AIPromptModelTests.test_format_user_prompt - A (3)
    M 219:4 AIAPITests.test_models_endpoint_no_api_key - A (3)
    M 242:4 AIAPITests.test_prompts_endpoint - A (3)
    M 300:4 AIAPITests.test_save_api_key_invalidates_cache - A (3)
    M 386:4 OpenRouterServiceTests.test_validate_key_cached_no_key - A (3)
    M 393:4 OpenRouterServiceTests.test_invalidate_key_cache - A (3)
    M 504:4 OpenRouterServiceTests.test_test_connection_success - A (3)
    M 518:4 OpenRouterServiceTests.test_test_connection_no_key - A (3)
    C 552:0 OpenRouterServiceAsyncTests - A (3)
    C 581:0 TimerNamingServiceTests - A (3)
    M 605:4 TimerNamingServiceTests.test_generate_timer_name_truncates_long_labels - A (3)
    M 642:4 TimerNamingAPITests.test_timer_name_endpoint_success - A (3)
    M 656:4 TimerNamingAPITests.test_timer_name_endpoint_missing_step_text - A (3)
    M 666:4 TimerNamingAPITests.test_timer_name_endpoint_invalid_duration - A (3)
    M 679:4 TimerNamingAPITests.test_timer_name_endpoint_ai_unavailable - A (3)
    M 894:4 SelectorRepairAPITests.test_repair_selector_endpoint_source_not_found - A (3)
    M 909:4 SelectorRepairAPITests.test_repair_selector_endpoint_empty_html - A (3)
    M 925:4 SelectorRepairAPITests.test_repair_selector_endpoint_ai_unavailable - A (3)
    M 988:4 SelectorRepairAPITests.test_sources_needing_attention_endpoint_empty - A (3)
    M 1068:4 AIFeatureFallbackTests.test_remix_suggestions_returns_503_when_ai_unavailable - A (3)
    M 1081:4 AIFeatureFallbackTests.test_scale_returns_503_when_ai_unavailable - A (3)
    M 1100:4 AIFeatureFallbackTests.test_discover_returns_503_when_ai_unavailable - A (3)
    M 1130:4 AIFeatureFallbackTests.test_models_endpoint_returns_empty_list_without_key - A (3)
    M 1142:4 AIFeatureFallbackTests.test_timer_name_returns_503_when_ai_unavailable - A (3)
    C 1157:0 AIResponseErrorTests - A (3)
    M 1176:4 AIResponseErrorTests.test_tips_returns_400_on_ai_error - A (3)
    M 1187:4 AIResponseErrorTests.test_tips_returns_400_on_validation_error - A (3)
    M 1198:4 AIResponseErrorTests.test_remix_returns_400_on_ai_error - A (3)
    M 1217:4 AIResponseErrorTests.test_repair_selector_returns_400_on_validation_error - A (3)
    C 1249:0 ValidatorEdgeCaseTests - A (3)
    M 1280:4 ValidatorEdgeCaseTests.test_validate_nested_object_in_array - A (3)
    M 1347:4 ValidatorEdgeCaseTests.test_validate_with_extra_fields_passes - A (3)
    M 1353:4 ValidatorEdgeCaseTests.test_validate_special_characters - A (3)
    M 1425:4 AICacheTests.test_invalidate_ai_cache - A (3)
    M 1457:4 ScalingServiceTests.test_parse_time_hours - A (3)
    M 1464:4 ScalingServiceTests.test_parse_time_hours_and_minutes - A (3)
    M 1471:4 ScalingServiceTests.test_parse_time_none - A (3)
    M 1484:4 ScalingServiceTests.test_format_time_minutes - A (3)
    M 1491:4 ScalingServiceTests.test_format_time_hours - A (3)
    M 1498:4 ScalingServiceTests.test_format_time_hours_and_minutes - A (3)
    M 1505:4 ScalingServiceTests.test_format_time_none - A (3)
    M 1549:4 ScalingServiceTests.test_calculate_nutrition_numeric_values - A (3)
    M 1601:4 RemixServiceTests.test_get_remix_suggestions_success - A (3)
    M 1753:4 RankingServiceTests.test_sort_by_image_filters_invalid - A (3)
    M 1828:4 RankingServiceTests.test_rank_results_single_item - A (3)
    C 1853:0 FixturesIntegrationTests - A (3)
    M 1859:4 FixturesIntegrationTests.test_all_valid_fixtures_pass_validation - A (3)
    M 20:4 AIPromptModelTests.test_prompts_seeded - A (2)
    M 42:4 AIPromptModelTests.test_get_prompt - A (2)
    C 60:0 AIResponseValidatorTests - A (2)
    M 66:4 AIResponseValidatorTests.test_validate_recipe_remix_valid - A (2)
    M 77:4 AIResponseValidatorTests.test_validate_recipe_remix_missing_field - A (2)
    M 88:4 AIResponseValidatorTests.test_validate_tips_generation_valid - A (2)
    M 94:4 AIResponseValidatorTests.test_validate_tips_generation_too_few - A (2)
    M 101:4 AIResponseValidatorTests.test_validate_remix_suggestions_valid - A (2)
    M 120:4 AIResponseValidatorTests.test_validate_timer_naming_valid - A (2)
    M 126:4 AIResponseValidatorTests.test_validate_search_ranking_valid - A (2)
    M 132:4 AIResponseValidatorTests.test_validate_selector_repair_valid - A (2)
    M 138:4 AIResponseValidatorTests.test_validate_unknown_prompt_type - A (2)
    M 257:4 AIAPITests.test_get_prompt_not_found - A (2)
    M 294:4 AIAPITests.test_test_api_key_empty - A (2)
    M 319:4 OpenRouterServiceTests.test_init_requires_api_key - A (2)
    M 330:4 OpenRouterServiceTests.test_init_with_explicit_key - A (2)
    M 335:4 OpenRouterServiceTests.test_is_available_without_key - A (2)
    M 343:4 OpenRouterServiceTests.test_is_available_with_key - A (2)
    M 402:4 OpenRouterServiceTests.test_complete_success - A (2)
    M 425:4 OpenRouterServiceTests.test_complete_handles_code_block_json - A (2)
    M 445:4 OpenRouterServiceTests.test_complete_invalid_json - A (2)
    M 465:4 OpenRouterServiceTests.test_complete_no_choices - A (2)
    M 484:4 OpenRouterServiceTests.test_complete_raw_text_response - A (2)
    M 556:4 OpenRouterServiceAsyncTests.test_complete_async_success - A (2)
    M 591:4 TimerNamingServiceTests.test_generate_timer_name_success - A (2)
    M 621:4 TimerNamingServiceTests.test_generate_timer_name_formats_duration - A (2)
    M 791:4 SelectorRepairServiceTests.test_repair_selector_truncates_html - A (2)
    M 1255:4 ValidatorEdgeCaseTests.test_validate_union_type_null - A (2)
    M 1264:4 ValidatorEdgeCaseTests.test_validate_union_type_string - A (2)
    M 1270:4 ValidatorEdgeCaseTests.test_validate_union_type_wrong_type - A (2)
    M 1286:4 ValidatorEdgeCaseTests.test_validate_nested_object_missing_field - A (2)
    M 1292:4 ValidatorEdgeCaseTests.test_validate_number_type - A (2)
    M 1303:4 ValidatorEdgeCaseTests.test_validate_number_type_as_int - A (2)
    M 1314:4 ValidatorEdgeCaseTests.test_validate_integer_type - A (2)
    M 1329:4 ValidatorEdgeCaseTests.test_validate_array_max_items - A (2)
    M 1335:4 ValidatorEdgeCaseTests.test_validate_array_min_items - A (2)
    M 1341:4 ValidatorEdgeCaseTests.test_validate_array_item_wrong_type - A (2)
    M 1366:4 ValidatorEdgeCaseTests.test_get_schema_returns_none_for_unknown - A (2)
    M 1478:4 ScalingServiceTests.test_parse_time_no_numbers - A (2)
    M 1512:4 ScalingServiceTests.test_calculate_nutrition_empty - A (2)
    M 1708:4 RankingServiceTests.test_is_ranking_available_no_key - A (2)
    M 1717:4 RankingServiceTests.test_is_ranking_available_with_key - A (2)
    M 1741:4 RankingServiceTests.test_sort_by_image_prioritizes_images - A (2)
    M 1821:4 RankingServiceTests.test_rank_results_empty_list - A (2)
    M 1837:4 RankingServiceTests.test_rank_results_falls_back_without_key - A (2)
    M 1884:4 FixturesIntegrationTests.test_all_invalid_fixtures_fail_validation - A (2)
    M 1910:4 FixturesIntegrationTests.test_get_fixture_helper - A (2)
    M 47:4 AIPromptModelTests.test_get_prompt_not_found - A (1)
    M 63:4 AIResponseValidatorTests.setUp - A (1)
    M 114:4 AIResponseValidatorTests.test_validate_remix_suggestions_wrong_count - A (1)
    M 144:4 AIResponseValidatorTests.test_validate_wrong_type - A (1)
    M 584:4 TimerNamingServiceTests.setUp - A (1)
    M 697:4 SelectorRepairServiceTests.setUp - A (1)
    M 854:4 SelectorRepairAPITests.setUp - A (1)
    M 1008:4 AIFeatureFallbackTests.setUp - A (1)
    M 1111:4 AIFeatureFallbackTests.test_tips_service_raises_when_no_key - A (1)
    M 1121:4 AIFeatureFallbackTests.test_remix_service_raises_when_no_key - A (1)
    M 1160:4 AIResponseErrorTests.setUp - A (1)
    M 1252:4 ValidatorEdgeCaseTests.setUp - A (1)
    M 1319:4 ValidatorEdgeCaseTests.test_validate_integer_rejects_float - A (1)
    M 1324:4 ValidatorEdgeCaseTests.test_validate_integer_rejects_boolean - A (1)
    M 1375:4 AICacheTests.setUp - A (1)
    M 1572:4 RemixServiceTests.setUp - A (1)
    M 1623:4 RemixServiceTests.test_get_remix_suggestions_validation_error - A (1)
    M 1856:4 FixturesIntegrationTests.setUp - A (1)
    M 1915:4 FixturesIntegrationTests.test_get_fixture_not_found - A (1)
apps/ai/models.py
    C 4:0 AIDiscoverySuggestion - A (2)
    C 39:0 AIPrompt - A (2)
    M 35:4 AIDiscoverySuggestion.__str__ - A (1)
    M 96:4 AIPrompt.__str__ - A (1)
    M 99:4 AIPrompt.format_user_prompt - A (1)
    M 104:4 AIPrompt.get_prompt - A (1)
apps/ai/services/remix.py
    F 66:0 create_remix - B (10)
    F 185:0 estimate_nutrition - B (9)
    F 249:0 _parse_time - A (5)
    F 19:0 get_remix_suggestions - A (4)
    F 274:0 _parse_servings - A (3)
    F 288:0 _generate_tips_background - A (3)
apps/ai/services/tips.py
    F 14:0 generate_tips - B (7)
    F 88:0 clear_tips - A (2)
apps/ai/services/timer.py
    F 14:0 generate_timer_name - B (8)
apps/ai/services/selector.py
    F 18:0 repair_selector - A (5)
    F 127:0 repair_all_broken_selectors - A (5)
    F 113:0 get_sources_needing_attention - A (1)
apps/ai/services/validator.py
    M 165:4 AIResponseValidator._format_error - C (11)
    C 135:0 AIResponseValidator - B (6)
    C 8:0 ValidationError - A (3)
    M 138:4 AIResponseValidator.validate - A (3)
    M 11:4 ValidationError.__init__ - A (2)
    M 200:4 AIResponseValidator.get_schema - A (1)
apps/ai/services/ranking.py
    F 43:0 rank_results - C (12)
    F 134:0 _apply_ranking - B (7)
    F 24:0 _filter_valid - A (3)
    F 15:0 is_ranking_available - A (2)
    F 33:0 _sort_by_image - A (2)
apps/ai/services/openrouter.py
    M 199:4 OpenRouterService.get_available_models - B (8)
    M 255:4 OpenRouterService.validate_key_cached - B (8)
    M 87:4 OpenRouterService.complete - B (7)
    M 142:4 OpenRouterService.complete_async - B (7)
    C 33:0 OpenRouterService - B (6)
    M 55:4 OpenRouterService._parse_json_response - B (6)
    M 228:4 OpenRouterService.test_connection - A (4)
    M 40:4 OpenRouterService.__init__ - A (3)
    C 15:0 AIServiceError - A (1)
    C 21:0 AIUnavailableError - A (1)
    C 27:0 AIResponseError - A (1)
    M 194:4 OpenRouterService.is_available - A (1)
    M 290:4 OpenRouterService.invalidate_key_cache - A (1)
apps/ai/services/cache.py
    F 18:0 _make_cache_key - A (1)
    F 42:0 cache_ai_response - A (1)
    F 101:0 invalidate_ai_cache - A (1)
apps/ai/services/scaling.py
    F 56:0 scale_recipe - C (12)
    F 189:0 calculate_nutrition - B (7)
    F 43:0 _format_time - B (6)
    F 17:0 _parse_time - A (5)
apps/ai/services/discover.py
    F 162:0 _generate_recommended_suggestions - B (8)
    F 214:0 _generate_new_suggestions - B (8)
    F 83:0 _format_suggestions - A (5)
    F 22:0 get_discover_suggestions - A (4)
    F 112:0 _generate_seasonal_suggestions - A (4)
    F 266:0 _get_season - A (4)
apps/ai/migrations/0008_update_serving_adjustment_indivisible.py
    F 6:0 update_prompt - A (2)
    F 67:0 revert_prompt - A (2)
    C 120:0 Migration - A (1)
apps/ai/migrations/0009_fix_discover_prompts.py
    F 121:0 update_discover_prompts - A (3)
    F 140:0 reverse_update - A (3)
    C 159:0 Migration - A (1)
apps/ai/migrations/0001_initial.py
    C 6:0 Migration - A (1)
apps/ai/migrations/0005_update_serving_adjustment_v2.py
    F 6:0 update_prompt - A (2)
    F 76:0 revert_prompt - A (2)
    C 119:0 Migration - A (1)
apps/ai/migrations/0007_update_search_ranking_prompt.py
    F 6:0 update_search_ranking_prompt - A (2)
    F 30:0 reverse_update - A (2)
    C 54:0 Migration - A (1)
apps/ai/migrations/0003_nutrition_estimate_prompt.py
    F 6:0 add_nutrition_prompt - A (1)
    F 56:0 remove_nutrition_prompt - A (1)
    C 62:0 Migration - A (1)
apps/ai/migrations/0006_add_ai_discovery_suggestion.py
    C 7:0 Migration - A (1)
apps/ai/migrations/0002_seed_prompts.py
    F 6:0 seed_prompts - A (2)
    F 294:0 remove_prompts - A (1)
    C 300:0 Migration - A (1)
apps/ai/migrations/0004_update_serving_adjustment_prompt.py
    F 6:0 update_prompt - A (2)
    F 49:0 revert_prompt - A (2)
    C 81:0 Migration - A (1)
apps/recipes/utils.py
    F 92:0 decimal_to_fraction - C (14)
    F 147:0 tidy_ingredient - B (7)
    F 205:0 tidy_quantities - A (2)
apps/recipes/api_user.py
    F 202:0 add_recipe_to_collection - A (3)
    F 57:0 add_favorite - A (2)
    F 154:0 create_collection - A (2)
    F 178:0 update_collection - A (2)
    F 265:0 record_view - A (2)
    C 36:0 FavoriteOut - A (2)
    C 94:0 CollectionItemOut - A (2)
    C 104:0 CollectionOut - A (2)
    C 125:0 CollectionDetailOut - A (2)
    C 244:0 HistoryOut - A (2)
    F 50:0 list_favorites - A (1)
    F 70:0 remove_favorite - A (1)
    F 147:0 list_collections - A (1)
    F 170:0 get_collection - A (1)
    F 193:0 delete_collection - A (1)
    F 224:0 remove_recipe_from_collection - A (1)
    F 254:0 list_history - A (1)
    F 285:0 clear_history - A (1)
    C 32:0 FavoriteIn - A (1)
    M 41:4 FavoriteOut.resolve_created_at - A (1)
    C 45:0 ErrorOut - A (1)
    C 85:0 CollectionIn - A (1)
    C 90:0 CollectionItemIn - A (1)
    M 100:4 CollectionItemOut.resolve_added_at - A (1)
    M 113:4 CollectionOut.resolve_recipe_count - A (1)
    M 117:4 CollectionOut.resolve_created_at - A (1)
    M 121:4 CollectionOut.resolve_updated_at - A (1)
    M 134:4 CollectionDetailOut.resolve_recipes - A (1)
    M 138:4 CollectionDetailOut.resolve_created_at - A (1)
    M 142:4 CollectionDetailOut.resolve_updated_at - A (1)
    C 240:0 HistoryIn - A (1)
    M 249:4 HistoryOut.resolve_viewed_at - A (1)
apps/recipes/api.py
    F 198:0 search_recipes - B (10)
    F 135:0 list_recipes - A (4)
    F 168:0 scrape_recipe - A (4)
    C 80:0 RecipeListOut - A (3)
    F 269:0 cache_health - A (2)
    F 300:0 get_recipe - A (2)
    F 316:0 delete_recipe - A (2)
    C 28:0 RecipeOut - A (2)
    M 66:4 RecipeOut.resolve_image - A (2)
    M 94:4 RecipeListOut.resolve_image - A (2)
    M 72:4 RecipeOut.resolve_scraped_at - A (1)
    M 76:4 RecipeOut.resolve_updated_at - A (1)
    M 100:4 RecipeListOut.resolve_scraped_at - A (1)
    C 104:0 ScrapeIn - A (1)
    C 108:0 ErrorOut - A (1)
    C 112:0 SearchResultOut - A (1)
    C 122:0 SearchOut - A (1)
apps/recipes/sources_api.py
    F 155:0 test_source - A (5)
    F 227:0 test_all_sources - A (5)
    C 20:0 SourceOut - A (3)
    F 96:0 get_source - A (2)
    F 109:0 toggle_source - A (2)
    F 137:0 update_selector - A (2)
    M 33:4 SourceOut.resolve_last_validated_at - A (2)
    F 78:0 list_sources - A (1)
    F 85:0 enabled_count - A (1)
    F 127:0 bulk_toggle_sources - A (1)
    C 39:0 SourceToggleOut - A (1)
    C 44:0 SourceUpdateIn - A (1)
    C 48:0 SourceUpdateOut - A (1)
    C 53:0 SourceTestOut - A (1)
    C 60:0 ErrorOut - A (1)
    C 65:0 BulkToggleIn - A (1)
    C 69:0 BulkToggleOut - A (1)
apps/recipes/tests.py
    C 19:0 BaseTestCase - A (2)
    C 50:0 CollectionTests - A (2)
    C 242:0 FavoriteTests - A (2)
    C 319:0 HistoryTests - A (2)
    C 404:0 NoProfileTests - A (2)
    C 437:0 QuantityTidyingTests - A (2)
    M 22:4 BaseTestCase.setUp - A (1)
    M 53:4 CollectionTests.test_list_collections_empty - A (1)
    M 59:4 CollectionTests.test_create_collection - A (1)
    M 72:4 CollectionTests.test_create_collection_duplicate_name - A (1)
    M 85:4 CollectionTests.test_list_collections - A (1)
    M 95:4 CollectionTests.test_get_collection - A (1)
    M 115:4 CollectionTests.test_get_collection_not_found - A (1)
    M 120:4 CollectionTests.test_update_collection - A (1)
    M 137:4 CollectionTests.test_delete_collection - A (1)
    M 148:4 CollectionTests.test_add_recipe_to_collection - A (1)
    M 165:4 CollectionTests.test_add_recipe_to_collection_increments_order - A (1)
    M 186:4 CollectionTests.test_add_duplicate_recipe_to_collection - A (1)
    M 205:4 CollectionTests.test_remove_recipe_from_collection - A (1)
    M 221:4 CollectionTests.test_collection_isolation_between_profiles - A (1)
    M 245:4 FavoriteTests.test_list_favorites_empty - A (1)
    M 251:4 FavoriteTests.test_add_favorite - A (1)
    M 262:4 FavoriteTests.test_add_duplicate_favorite - A (1)
    M 276:4 FavoriteTests.test_list_favorites - A (1)
    M 286:4 FavoriteTests.test_remove_favorite - A (1)
    M 297:4 FavoriteTests.test_remove_favorite_not_found - A (1)
    M 302:4 FavoriteTests.test_favorites_isolation_between_profiles - A (1)
    M 322:4 HistoryTests.test_list_history_empty - A (1)
    M 328:4 HistoryTests.test_record_view - A (1)
    M 339:4 HistoryTests.test_record_view_updates_timestamp - A (1)
    M 358:4 HistoryTests.test_list_history - A (1)
    M 368:4 HistoryTests.test_list_history_with_limit - A (1)
    M 378:4 HistoryTests.test_clear_history - A (1)
    M 387:4 HistoryTests.test_history_isolation_between_profiles - A (1)
    M 407:4 NoProfileTests.setUp - A (1)
    M 421:4 NoProfileTests.test_favorites_requires_profile - A (1)
    M 426:4 NoProfileTests.test_collections_requires_profile - A (1)
    M 431:4 NoProfileTests.test_history_requires_profile - A (1)
    M 440:4 QuantityTidyingTests.test_decimal_to_fraction_half - A (1)
    M 446:4 QuantityTidyingTests.test_decimal_to_fraction_quarter - A (1)
    M 452:4 QuantityTidyingTests.test_decimal_to_fraction_third - A (1)
    M 459:4 QuantityTidyingTests.test_decimal_to_fraction_two_thirds - A (1)
    M 466:4 QuantityTidyingTests.test_decimal_to_fraction_three_quarters - A (1)
    M 472:4 QuantityTidyingTests.test_decimal_to_fraction_mixed_number - A (1)
    M 480:4 QuantityTidyingTests.test_decimal_to_fraction_whole_number - A (1)
    M 487:4 QuantityTidyingTests.test_tidy_ingredient_cups - A (1)
    M 495:4 QuantityTidyingTests.test_tidy_ingredient_tablespoons - A (1)
    M 502:4 QuantityTidyingTests.test_tidy_ingredient_teaspoons - A (1)
    M 509:4 QuantityTidyingTests.test_tidy_ingredient_keeps_grams - A (1)
    M 516:4 QuantityTidyingTests.test_tidy_ingredient_keeps_ml - A (1)
    M 523:4 QuantityTidyingTests.test_tidy_ingredient_countable_items - A (1)
    M 530:4 QuantityTidyingTests.test_tidy_ingredient_no_unit - A (1)
    M 537:4 QuantityTidyingTests.test_tidy_quantities_list - A (1)
    M 553:4 QuantityTidyingTests.test_tidy_ingredient_empty_string - A (1)
    M 559:4 QuantityTidyingTests.test_tidy_ingredient_no_number - A (1)
apps/recipes/models.py
    C 4:0 Recipe - A (2)
    C 98:0 SearchSource - A (2)
    C 120:0 RecipeFavorite - A (2)
    C 143:0 RecipeCollection - A (2)
    C 164:0 RecipeCollectionItem - A (2)
    C 187:0 RecipeViewHistory - A (2)
    C 209:0 CachedSearchImage - A (2)
    C 237:0 ServingAdjustment - A (2)
    M 94:4 Recipe.__str__ - A (1)
    M 116:4 SearchSource.__str__ - A (1)
    M 139:4 RecipeFavorite.__str__ - A (1)
    M 160:4 RecipeCollection.__str__ - A (1)
    M 183:4 RecipeCollectionItem.__str__ - A (1)
    M 205:4 RecipeViewHistory.__str__ - A (1)
    M 233:4 CachedSearchImage.__str__ - A (1)
    M 275:4 ServingAdjustment.__str__ - A (1)
apps/recipes/services/fingerprint.py
    F 66:0 get_fallback_profiles - A (3)
    F 46:0 get_random_profile - A (1)
    F 56:0 get_random_delay - A (1)
apps/recipes/services/image_cache.py
    M 62:4 SearchImageCache._download_and_save - B (7)
    M 118:4 SearchImageCache._fetch_image - B (6)
    M 215:4 SearchImageCache._convert_to_jpeg - B (6)
    C 25:0 SearchImageCache - A (5)
    M 39:4 SearchImageCache.cache_images - A (4)
    M 155:4 SearchImageCache.get_cached_urls_batch - A (4)
    M 192:4 SearchImageCache._generate_filename - A (3)
    M 252:4 SearchImageCache._is_image_url - A (1)
apps/recipes/services/scraper.py
    M 325:4 RecipeScraper._download_image - B (7)
    M 359:4 RecipeScraper._convert_webp_to_jpeg - B (7)
    M 59:4 RecipeScraper.scrape_url - B (6)
    M 285:4 RecipeScraper._parse_time - A (5)
    C 44:0 RecipeScraper - A (4)
    M 183:4 RecipeScraper._fetch_html - A (4)
    M 262:4 RecipeScraper._safe_get - A (4)
    M 273:4 RecipeScraper._safe_get_ingredient_groups - A (4)
    M 159:4 RecipeScraper._generate_tips_background - A (3)
    M 212:4 RecipeScraper._parse_recipe - A (3)
    M 298:4 RecipeScraper._parse_servings - A (3)
    M 307:4 RecipeScraper._parse_rating - A (3)
    M 316:4 RecipeScraper._parse_rating_count - A (3)
    C 26:0 ScraperError - A (1)
    C 32:0 FetchError - A (1)
    C 38:0 ParseError - A (1)
    M 56:4 RecipeScraper.__init__ - A (1)
    M 392:4 RecipeScraper._is_image_url - A (1)
    M 398:4 RecipeScraper._generate_image_filename - A (1)
apps/recipes/services/search.py
    M 413:4 RecipeSearch._looks_like_recipe_url - C (15)
    M 360:4 RecipeSearch._fallback_parse - C (12)
    M 54:4 RecipeSearch.search - C (11)
    C 38:0 RecipeSearch - B (6)
    M 245:4 RecipeSearch._find_link - B (6)
    M 215:4 RecipeSearch._parse_search_results - A (5)
    M 263:4 RecipeSearch._extract_title - A (5)
    M 300:4 RecipeSearch._extract_image - A (5)
    M 321:4 RecipeSearch._extract_result_from_element - A (5)
    M 174:4 RecipeSearch._search_source - A (3)
    M 280:4 RecipeSearch._extract_rating - A (3)
    M 160:4 RecipeSearch._apply_ai_ranking - A (2)
    M 314:4 RecipeSearch._extract_description - A (2)
    C 27:0 SearchResult - A (1)
    M 51:4 RecipeSearch.__init__ - A (1)
    M 529:4 RecipeSearch._record_failure - A (1)
    M 542:4 RecipeSearch._record_success - A (1)
apps/recipes/migrations/0001_initial.py
    C 7:0 Migration - A (1)
apps/recipes/migrations/0003_recipecollection_recipecollectionitem_recipefavorite_and_more.py
    C 7:0 Migration - A (1)
apps/recipes/migrations/0006_serving_adjustment_instructions_times.py
    C 6:0 Migration - A (1)
apps/recipes/migrations/0007_recipe_profile.py
    F 7:0 delete_all_recipes - A (1)
    F 13:0 noop - A (1)
    C 18:0 Migration - A (1)
apps/recipes/migrations/0004_cachedsearchimage.py
    C 6:0 Migration - A (1)
apps/recipes/migrations/0002_populate_search_sources.py
    F 98:0 populate_search_sources - A (2)
    F 107:0 remove_search_sources - A (2)
    C 113:0 Migration - A (1)
apps/recipes/migrations/0009_add_default_selectors.py
    F 28:0 add_selectors - A (2)
    F 34:0 remove_selectors - A (2)
    C 40:0 Migration - A (1)
apps/recipes/migrations/0005_serving_adjustment.py
    C 7:0 Migration - A (1)
apps/recipes/migrations/0008_rename_recipes_rec_profile_idx_recipes_rec_profile_7945b8_idx.py
    C 6:0 Migration - A (1)
apps/recipes/management/commands/cleanup_search_images.py
    M 40:4 Command.handle - B (9)
    C 24:0 Command - B (6)
    M 27:4 Command.add_arguments - A (1)
apps/legacy/apps.py
    C 6:0 LegacyConfig - A (1)
apps/legacy/views.py
    F 133:0 recipe_detail - A (5)
    F 187:0 play_mode - A (5)
    F 47:0 _is_ai_available - A (2)
    F 69:0 home - A (2)
    F 109:0 search - A (2)
    F 322:0 settings - A (2)
    F 19:0 require_profile - A (1)
    F 56:0 profile_selector - A (1)
    F 220:0 all_recipes - A (1)
    F 246:0 favorites - A (1)
    F 268:0 collections - A (1)
    F 292:0 collection_detail - A (1)
apps/legacy/templatetags/legacy_tags.py
    F 11:0 format_time - A (4)
    F 32:0 format_nutrition_key - A (4)
    F 26:0 in_list - A (1)
apps/core/encryption.py
    F 52:0 decrypt_value - A (5)
    F 29:0 encrypt_value - A (3)
    F 85:0 is_encrypted - A (2)
    F 18:0 _get_encryption_key - A (1)
apps/core/apps.py
    C 4:0 CoreConfig - A (1)
apps/core/middleware.py
    M 34:4 DeviceDetectionMiddleware._is_legacy_device - C (14)
    C 4:0 DeviceDetectionMiddleware - B (6)
    M 27:4 DeviceDetectionMiddleware.__init__ - A (1)
    M 30:4 DeviceDetectionMiddleware.__call__ - A (1)
apps/core/api.py
    F 110:0 reset_database - B (7)
    F 34:0 health_check - A (2)
    F 81:0 get_reset_preview - A (1)
    C 28:0 HealthSchema - A (1)
    C 46:0 DataCountsSchema - A (1)
    C 59:0 ResetPreviewSchema - A (1)
    C 65:0 ResetConfirmSchema - A (1)
    C 69:0 ErrorSchema - A (1)
    C 74:0 ResetSuccessSchema - A (1)
apps/core/tests.py
    M 40:4 EncryptionTests.test_is_encrypted - A (4)
    C 10:0 EncryptionTests - A (3)
    M 13:4 EncryptionTests.test_encrypt_value - A (3)
    C 55:0 AppSettingsEncryptionTests - A (3)
    M 58:4 AppSettingsEncryptionTests.test_api_key_encrypted_on_save - A (3)
    M 20:4 EncryptionTests.test_decrypt_value - A (2)
    M 27:4 EncryptionTests.test_encrypt_empty_string - A (2)
    M 31:4 EncryptionTests.test_decrypt_empty_string - A (2)
    M 35:4 EncryptionTests.test_decrypt_unencrypted_value - A (2)
    M 47:4 EncryptionTests.test_roundtrip_special_characters - A (2)
    M 73:4 AppSettingsEncryptionTests.test_api_key_property_decrypts - A (2)
    M 83:4 AppSettingsEncryptionTests.test_legacy_unencrypted_key_still_works - A (2)
    M 97:4 AppSettingsEncryptionTests.test_empty_api_key - A (2)
apps/core/models.py
    C 6:0 AppSettings - A (3)
    M 17:4 AppSettings.save - A (3)
    M 38:4 AppSettings.openrouter_api_key - A (3)
    M 27:4 AppSettings.get - A (1)
    M 33:4 AppSettings.openrouter_api_key - A (1)
apps/core/migrations/0001_initial.py
    C 6:0 Migration - A (1)
apps/profiles/utils.py
    F 9:0 get_current_profile - A (3)
    F 25:0 get_current_profile_or_none - A (3)
    F 42:0 aget_current_profile_or_none - A (1)
apps/profiles/apps.py
    C 4:0 ProfilesConfig - A (1)
apps/profiles/api.py
    F 198:0 delete_profile - B (6)
    F 79:0 list_profiles - A (2)
    F 133:0 update_profile - A (2)
    F 143:0 get_deletion_preview - A (2)
    F 120:0 create_profile - A (1)
    F 127:0 get_profile - A (1)
    F 250:0 select_profile - A (1)
    C 14:0 ProfileIn - A (1)
    C 21:0 ProfileOut - A (1)
    C 29:0 ProfileStatsSchema - A (1)
    C 39:0 ProfileWithStatsSchema - A (1)
    C 49:0 DeletionDataSchema - A (1)
    C 60:0 ProfileSummarySchema - A (1)
    C 67:0 DeletionPreviewSchema - A (1)
    C 73:0 ErrorSchema - A (1)
apps/profiles/models.py
    C 4:0 Profile - A (2)
    M 24:4 Profile.__str__ - A (1)
apps/profiles/migrations/0001_initial.py
    C 6:0 Migration - A (1)
cookie/urls.py
    F 29:0 health - A (1)
cookie/settings.py
    F 18:0 get_secret_key - A (3)

566 blocks (classes, functions, methods) analyzed.
Average complexity: A (2.6201413427561837)
